このreadmeはHomework.mdと同じ内容です。

# ノートブックの概要
ストリートファイター6という格闘ゲームについての質問がRAGによって改善するかを確認しているノートブックです。\
RAGのソースには、海外のプロプレイヤーのyoutubeチャンネルでの解説動画( https://youtu.be/2kBkizvG7eM?si=Gj2DUveB5f63Lu43 )の文字起こしを使用しています。\
llmのモデルにはgemma3-4b-itを使用しました。

# RAGの実装方法について
基本的なRAGの実装は演習内のコード、モデルを参考としています。\
次の３種類のRAGを実装して、llmの回答の精度の向上にチャレンジしました。

① 類似度が上から５つのsentenceをreferenceとして使用するRAG\
② 類似度が上から５つのsentenceの前後の文章もreferenceとして使用するRAG\
③ 英語と日本語の技名の対応表を与えたRAG

# RAGによる効果
referenceを与える前のモデルは、このゲーム,キャラクターについての情報がほとんどなかったと思われる回答を生成していました。

```
質問 1 :  akiの強みは？

回答 1 :  荒技の代名詞である「荒技」は、アキの最も顕著な強みです。この技は、相手のガードを崩し、コンボを繋ぎやすくするだけでなく、相手を怯ませて有利な状況を作り出す効果もあります。
```
キャラクター名である「aki」は「荒技」と呼ばれる技を持っていません。また、ストリートファイター6には「怯む」などの状態もありません。

シンプルなRAGの実装だけでも、ゲームに関する知識をllmに与えることができ、それなりの回答精度になりました。
```
質問 1 :  akiの強みは？

回答 1 :  
Akiの強みは、以下の点が挙げられます。

*   **強力なバーントアウトのプレッシャーループ:** Akiは、非常に多様で強力なバーントアウトのプレッシャーループを持っています。
*   **距離戦でのリッキーパンチの有効性:** 遠距離からでも、ソニックブレードをクローチヘビーキックやクローチヘビーパンチで確実に punish できる。
*   **近接での優位性:** 相手に近づき、毒を付与し、4ポイントの有利ポジションを確保する。

これらの強みを活かすことで、Akiは相手を圧倒する戦い方が可能です。
```
ここに挙げられている３つの強みはすべて正しい情報といえます。

# 工夫したRAG
格闘ゲーム（ストリートファイター）には英語、日本語それぞれに技名などの用語があります。\
それらを直訳するとニュアンスは伝わるものの、日本で使われている用語とは異なり、違和感を感じる回答になってしまいます。

例えば、
```
質問 3 :  akiは投げループできる？

回答 3 :  参照資料によると、アキは投擲を1つだけ投げることができ、ヒット時に毒を付与します。
また、アキはほぼダイブ全体を通して投擲に対して無敵であり、この動きは非常に強力な火球のペナルティになります。
さらに、アキが相手の横にスライドし、反対側に到達すると、彼女は回復の終わりまでストライクと投擲に対する無敵状態を維持します。
また、アキはダイブの頂点において投擲を回避することもできます。最後に、これはマイナス3ですが、アキは投げの範囲外に配置されており、相手がその後であなたを混ぜ合わせるのが難しくなります。
これらの情報から、アキは投げループをすることが難しいと考えられます。
```
この回答は「ダイブ」に無敵時間がある旨を伝えていますが、akiにはそのような技ありません。

そこで、今回は日本語と英語の技の対応表もreferenceとともに与えてRAGを行いました。\
チャンク化+対応表を与えた回答は次のようなものになりました。
```
質問 3 :  akiは投げループできる？

回答 3 :  
Akiは、紫煙砲（Nightshade Pulse）を使って、相手を投げループできる可能性があります。
紫煙砲は、相手に毒を付与するプロジェクターを放つため、ヒット時に毒効果があります。
Akiは、この技を使った際のほぼ全期間中、プロジェクターに対して無敵状態であるため、非常に強力な火球 punish（反撃）として使用できます。
また、Akiは、技の頂点付近でプロジェクターを回避することも可能です。
さらに、Akiは、側面にスライドすることで、相手の側を通過し、反対側まで到達すると、その間、攻撃とプロジェクターに対して無敵状態を維持できます。
この無敵状態は、技の回復時まで続きます。
この状況下では、Akiは投げられる範囲外に出されるため、相手はあなたを混ぜ合わせることが難しくなります。
これらの要素を組み合わせることで、Akiは投げループを成功させる可能性が高まります。
```
fire ball -> 火球となっている(これは「波動拳」などの弾)ことを除いて、日本で使われている用語での説明になっており、違和感が少なくなりました。

# 改善点
referenceを抜き出す部分の精度が高くなかったことこと確認できており、この点がllmによる回答の質を下げてしまっています。\
次のような点がリトリーバルの改善点だと考えています。

①日本語の質問->英語のソースの探索に工夫をする\
②ゲーム特有の用語に対して検索をかけるようなシステムを組む\
③文字起こしを人手で修正してから使用する

gemma3自体にはゲームの知識がほぼ無いため、referenceを正確に抜き出す必要があったと考えています。
